
* TV Downloader

A command line tool to download and manage TV shows from newsgroups or
bittorent.  It will download nzb files or magnet links.

TV Downloader keeps track of which shows have been downloaded and what
shows are available to download.

There are two NZB search providers, nzbclub.com and nzbindex.com.
Also, there are two bittorent search providers, kickass.to and
thepiratebay.sx.


** Features

+ Keeps track of watched shows
+ Show a list of shows available for download
+ Gives you a list of torrents or nzbs you can choose from
+ You can add new shows from the command line
+ Will display info showing what show will be next and how many days
  till broadcast
+ Displays a calendar of upcoming episodes


** Install

TV Downloader has been tested on Linux and Mac.  It would probably not
be to hard to make it work on windows, and if anyone is interested, I
can take a look at making it work or alternatively send me a pull request.


*** Dependencies

TV Downloader requires four additional python libraries to be installed:
  1. *tvdb_api* - [[https://github.com/dbr/tvdb_api]] \\
     Python library to access the thetvdb.com api
  2. *Beautiful Soup* - http://www.crummy.com/software/BeautifulSoup/bs4/doc/ \\
     Python library used to scrap thepiratebay.org since they don't have an api
  4. *Requests* - http://docs.python-requests.org/en/latest/  \\
     Library to download html pages
  5. *Feedparser* - https://pypi.python.org/pypi/feedparser \\
     For sites that provide an xml api this library is used to parse them


*** Install steps

  1. =easy_install tvdb_api=
  2. =easy_install beautifulsoup4=
  3. =easy_install feedparser=
  4. =pip install requests=
  5. Create a dir somewhere and clone this repository: \\
     =git clone https://github.com/smmcg/tv-downloader.git=
  6. Put tv.py on your $PATH or call it directly
     (I have it symlinked to =tv= in a bin folder thats on the path)
  7. type: =tv.py= \\
     The first time its run, it will ask to create the
     config dir.  Type =Y= to allow it.  The config directory will be
     created in your home dir called =.tv-downloader/=
  8. Type =tv.py addnew "someshow";= to start. \\
     For example: =tv.py addnew 'some tv show name';=


** How to use

=tv.py addnew "show name";=

tv will search thetvdb.com for a match to your show name.  If the show
it asks you is not the right one, it helps to add the year to the
name: =tv.py addnew 'show name year';=.


=tv.py showmissing;=

This will list any shows that are ready to download.


=tv.py download;= \\
=tv.py download -c COUNT -l LOCATION -p PROVIDER [SHOW NAME]=

For each show thats ready to download, it will ask you which one you
want to download.

 * =-c COUNT=  sets the number of results to display, the default is 5.
 * =-l LOCATION=  sets the dir to download the nzb files to if you are using
   an nzb search engine.  This can be set in the ini file
 * =-p PROVIDER=  will set the provider to use.  Look in the ini file to see
   how that can be specified there.

And finally, you can specify a single show to only download that show
instead of downloading all.


=tv.py calendar;=

=tv.py calendar --days DAYS;= \\
=tv.py calendar --days DAYS,AFTER;=

Display a calendar of all the current shows in your database.  It
defaults to the width of the console.

 * =--days DAYS= will narrow the calendar to DAYS days.  For example,
   =--days 10= will show the next 10 days only.
 * =--days DAYS,AFTER= will display from DAYS to AFTER days.  For
   example, =--days 10,5= will display from the 10th day to the 15th day.


=tv.py info;= \\
=tv.py info -a -x --show-links --synopsis --ask-inactive [SHOW NAME];=

This will show you what shows are next, and how many days till they
are broadcast.  Called without arguments, it lists all show except
shows marked inactive, in alphabetical order.  A single show can be
specified also.

 * =-a= will show all shows including inactive shows
 * =-x= this will sort the shows by order of which episodes are next
 * =--show-links= will display links to imdb.com and thetvdb.com for
   each show
 * =--ask-inactive=  When a show has been completely downloaded, and it
   has been cancelled or ended, it will ask you if you want to mark it
   inactive.


=tv.py nondbshow "some search name";=

This will show you matches to your search.  Anything downloaded this
way will not be recorded in your database.


=tv.py providers;=

This will list search providers available to the program.  The default
one is the provider at the top of the list in config.ini.


=tv.py editdbinfo "exact show name";=

Edit the data in the database for show name.  You can manually set a
show as 'inactive' here if you wish.


** Screenshots

[[http://i.imgur.com/jMP4T3h.gif]]

This screenshot shows the providers list command and downloading using
an NZB search provider.

[[http://i.imgur.com/umS1DqH.gif]]

This shows using a bittorrent search provider to download.

[[http://i.imgur.com/sBFl5sg.gif]]

This shows the calendar.

[[http://i.imgur.com/eg0Ui7U.gif]]

This show the info command.


** Configure

TV Downloader stores the config file sqlite database in
~/.tv_downloader.  If that dir doesn't exist, the program will offer
to create it for you.


** Command line

=$ tv.py --help=
#+BEGIN_EXAMPLE
Download and manage TV shows

Usage:
  tv download    [-n] [-c COUNT] [-l LOCATION] [-p PROVIDER] [SHOW_NAME]
  tv showmissing [-n]
  tv info        [-n] [-a] [-x] [--ask-inactive] [--show-links] [--synopsis] [SHOW_NAME]
  tv calendar    [-n] [-a] [-x] [--no-color] [--days DAYS] [SHOW_NAME]
  tv addnew SHOW_NAME
  tv nondbshow SEARCH_STRING [-l LOCATION] [-p PROVIDER]
  tv editdbinfo SHOW_NAME [-d DB-FILE]
  tv providers

  SHOW_NAME is a full or partial name of a tv show.  If SHOW_NAME is
  specified, tv will only act on matches to that name.  For example,
  if "fam" is used, "Family Guy" and "Modern Family" will be
  displayed.

Options:
  -h, --help
  -c COUNT, --count COUNT
                    Count of search results to list. [default: 5]
  -l DOWNLOAD_LOCATION, --location DOWNLOAD_LOCATION
                    Location to download the nzb files to
  -n, --no-cache    Re-download the show data instead of using the cached data
  -p SEARCH_PROVIDER, --search-provider SEARCH_PROVIDER
                    Specify a different search engine instead of the one
                    in the config file.
  -a, --show-all    Show all shows including the ones marked inactive
  -x, --sort-by-next  Sort by release date instead of the default alphabetical
  --ask-inactive    Ask to make inactive shows that are cancelled
  --show-links      Show links to IMDB.com and TheTVDb.com for each show
  -s --synopsis     Display the show synopsis
  --days DAYS       The number of days to show in the calendar
  --no-color        Don't use color in output. Useful if output is to be
                    used in email or text file.
#+END_EXAMPLE
